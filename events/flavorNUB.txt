########################################
# Events for Nubia
#
# written by Johan Andersson
########################################

namespace = flavor_nub
normal_or_historical_nations = yes



# Spawn Funj
province_event = {
	id = flavor_nub.1
	title = flavor_nub.1.t
	desc = flavor_nub.1.d
	picture = RELIGIOUS_TURMOIL_eventPicture
	fire_only_once = yes

	trigger = {
		province_id = 1232
		NOT = { exists = NUB }
		is_year = 1500
		funj_spawning_region = {
			is_empty = yes
		}
	}

	mean_time_to_happen = {
		months = 180
	}
	
	
	option = { 
		name = flavor_nub.1.a
		funj_spawning_region = {
			add_core = NUB
			owner = {
				country_event = { id = flavor_nub.3 }
			}
		}		
		
		funj_spawning_region = {
			limit = {
				is_empty = yes
			}
			cede_province = NUB
		}

		NUB = {
			random_owned_province = {
				infantry = NUB
				infantry = NUB
				infantry = NUB
				infantry = NUB
				cavalry = NUB
				cavalry = NUB
			}
		}
	}
}

country_event = {
	id = flavor_nub.2
	title = flavor_nub.2.t
	desc = flavor_nub.2.d
	picture = RELIGIOUS_TURMOIL_eventPicture
	fire_only_once = yes

	trigger = {
		tag = NUB
		religion_group = christian
		NOT = { stability = 3 }
	}

	mean_time_to_happen = {
		months = 240
	}
	
	
	option = { 
		name = flavor_nub.2.a
		ai_chance = { factor = 100 }
		change_religion = sunni
		every_neighbor_country = {
			limit = {
				religion_group = muslim
			}
			add_opinion = {
				who = ROOT
				modifier = funj_conversion_positive
			}
		}
		every_neighbor_country = {
			limit = {
				religion_group = christian
			}
			add_opinion = {
				who = ROOT
				modifier = funj_conversion_negative
			}
		}
	}
	option = { 
		name = flavor_nub.2.b
		ai_chance = { factor = 1 }
		add_stability = 1
	}	
}

# Event to send to other province owners of the area when Funj is formed.
country_event = {
	id = flavor_nub.3
	title = flavor_nub.1.t
	desc = flavor_nub.1.d
	picture = RELIGIOUS_TURMOIL_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		NOT = { owns = 1232 }
	}

	option = { 
		name = flavor_nub.1.a
		tooltip = {
			funj_spawning_region = {
				add_core = NUB
			}
		}
	}
}